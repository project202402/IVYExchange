(this["webpackJsonpparaswap-dapp"]=this["webpackJsonpparaswap-dapp"]||[]).push([[29],{2154:function(e,t,n){"use strict";n.r(t),n.d(t,"isGenericSelectTokenModalProps",(function(){return z})),n.d(t,"onSelectTokenFactoryMap",(function(){return X})),n.d(t,"isOnSelectTokenFactoryMap",(function(){return Y})),n.d(t,"SelectTokenModal",(function(){return te}));var o=n(2),r=n(14),a=n(91),c=n(75),l=n(6),i=n(92),s=n(1644),d=n(1),u=n(76),b=n(70),j=n(65),O=n.n(j),k=n(11),p=n(55),f=n(35),v=n(1004),m=n(458),w=n(121),y=n(135),T=n(381),P=n(27),S=n(563),h=n(8),C=n(310),x=n(87),g=n(38),M=n(527),R=n(16),F=n.n(R),B=n(163),D=n(109),N=n(234),L=n(0);function H(e){return"tokenRow"===e.type}var E=Object(a.a)({contentClassName:{overflow:"hidden"}},{name:"FixTableScroll"}),I=function(e){var t=function(e,t){var n,r=Object(c.a)().t,a=Object(d.useMemo)((function(){return[{key:"token",title:r("column.token")},{key:"balance",title:r("column.balance")},{key:"pspValue",title:"PSP Value"}]}),[r]),i=Object(m.c)(),s=Object(w.g)().data,u=Object(B.c)().networkId,b=Object(x.c)(u),j=Object(M.b)()||{},O=j.sPSP2PSPbalance,k=j.sumPSP,p=null!==(n=b&&(null===s||void 0===s?void 0:s[b.address.toLowerCase()]))&&void 0!==n?n:{price:.031},f=Object(d.useCallback)((function(e){var t,n=(null===O||void 0===O||null===(t=O[e.address])||void 0===t?void 0:t.toString(10))||e.balance,r=p.price&&n?new F.a(p.price).multipliedBy(n).dividedBy(Math.pow(10,+e.decimals)).toNumber():void 0;return Object(o.a)(Object(o.a)({},e),{},{usdBalance:r,pspBalance:n})}),[null===p||void 0===p?void 0:p.price,O]),v=Object(T.c)(),y=Object(d.useMemo)((function(){return(null===t||void 0===t?void 0:t(v))||v}),[v,t]),C=Object(S.c)({overridingTokensList:y,tokenFilter:"",extendRow:f}).tokenRows,g=Object(l.b)(),R=Object(P.c)().closeModal,D=Object(d.useCallback)((function(t){g(e(t)),R()}),[R,g,e]),N=Object(d.useMemo)((function(){return v.find((function(e){return e.address.toLowerCase()!==(null===b||void 0===b?void 0:b.address.toLowerCase())}))}),[b,v]),L=Object(d.useCallback)((function(e){if(H(e)){if(V(e.tokenRow))return;D(e.tokenRow.tokenRef)}else Object(h.assert)(N,"firstSpspToken not found"),D(N)}),[N,D]),E=Object(d.useMemo)((function(){if(k&&(null===p||void 0===p?void 0:p.price)&&(null===b||void 0===b?void 0:b.decimals)){var e=k.toString(10);return{usdBalance:new F.a(p.price).multipliedBy(k||0).dividedBy(Math.pow(10,+b.decimals)).toNumber(),pspBalance:e}}}),[null===p||void 0===p?void 0:p.price,null===b||void 0===b?void 0:b.decimals,k]),I=Object(d.useMemo)((function(){var e={type:"allsPSPTokensRow",key:"allsPSPTokensRow",tokenRow:void 0,extraData:E};return C.reduce((function(t,n){var o={key:n.address,tokenRow:n,extraData:{pspBalance:n.pspBalance,usdBalance:n.usdBalance},type:"tokenRow"};return V(n)&&(o.rowClassName="non-clickable",o.isSPSP=!0,t.sPSPsCounted||(t.sPSPsCounted=!0,t.allRows.push(e))),(!o.isSPSP||o.extraData.pspBalance&&+o.extraData.pspBalance>0)&&t.allRows.push(o),t}),{sPSPsCounted:!1,allRows:[]}).allRows}),[C,E]);return{classes:{tableContainer:i.root},stickyHeader:!0,columns:a,rows:I,onRowClick:L,headerCellRenderer:G,bodyCellRenderer:K}}(e.dispatchTokenSelect,e.transformTokens),n=E().contentClassName;return Object(L.jsx)(i.a,{contentClassName:n,title:"Select a token...",height:445,children:Object(L.jsx)(m.b,{tableProps:t,footer:null})})},K=function(e){var t=e.columnKey,n=e.row;if(n){if("token"===t)return H(n)?Object(L.jsx)(v.b,{isSPSP:n.isSPSP,address:n.tokenRow.address,img:n.tokenRow.img,symbol:n.tokenRow.symbol,name:n.tokenRow.name}):Object(L.jsx)("div",{style:{position:"relative",height:"100%"},children:Object(L.jsx)(g.a,{container:!0,style:{position:"absolute",width:"200px",height:"100%"},justify:"center",alignItems:"center",children:Object(L.jsx)(v.b,{address:k.i,img:C.a,symbol:"sPSPs",name:"Staked PSP on all ParaSwapPools"})})});if("balance"===t&&H(n)){var o=n.tokenRow.balance||"0",r=Object(k.Hb)(o,Number(n.tokenRow.decimals)),a=Object(k.Eb)(Object(k.Gb)(r));return Object(L.jsx)(v.a,{balanceToDisplay:a,usdBalance:null})}if("pspValue"===t&&function(e){return"extraData"in e&&void 0!==e.extraData}(n)){var c,l=n.extraData.pspBalance||"0",i=Object(k.Hb)(l),s=Object(k.Eb)(Object(k.Gb)(i)),d=(null===(c=n.extraData.usdBalance)||void 0===c?void 0:c.toFixed(2))||null;return Object(L.jsx)(v.a,{balanceToDisplay:s,usdBalance:d})}}return Object(L.jsx)("span",{})},A={token:{textAlign:"left"},balance:{textAlign:"right"},pspValue:{textAlign:"right",paddingLeft:24,whiteSpace:"nowrap"}},G=function(e){return Object(L.jsx)("div",{style:A[e.key],children:e.title.toUpperCase()})};function V(e){return!!e.symbol&&/sPSP\d+/i.test(e.symbol)}var _=n(571),J=n(1008),U=n(24),W=n(175),q=n(231);function z(e){return!!e&&Object(k.bb)(e,"selectTokenFactoryKey")&&!!e.selectTokenFactoryKey}var Q={SelectTokenForNativePoolModal:function(){return Object(L.jsx)(I,{dispatchTokenSelect:y.k})},SelectToken1ForHybridPoolModal:function(){var e=Object(D.b)(),t=Object(N.c)("sePSP").balance,n=Object(d.useMemo)((function(){if(e){var n=Object(o.a)(Object(o.a)({},e),{},{balance:t,img:C.a});return function(e){return[e[0],n].concat(Object(f.a)(e.slice(1))).filter(k.lb)}}}),[t,e]);return Object(L.jsx)(I,{dispatchTokenSelect:y.i,transformTokens:n})},SelectETHOrWETHModal:function(){var e=function(){var e=Object(B.c)().networkId,t=Object(c.a)().t,n=Object(d.useMemo)((function(){return[{key:"asset",title:t("column.token"),width:250},{key:"amount",title:t("column.balance"),width:150}]}),[t]),r=Object(m.c)(),a=Object(w.c)(void 0,e),i=Object(q.a)(e),s=i.tokens,u=Object(W.c)(i.tokenAddresses,{refetchInterval:U.N},e).data,b=Object(d.useMemo)((function(){return s.map((function(e){return Object(o.a)(Object(o.a)({},e),{},{balance:null===u||void 0===u?void 0:u[e.address.toLowerCase()]})}))}),[s,u]),j=Object(d.useMemo)((function(){return Object(k.R)(b,(function(e){return e.address.toLowerCase()}))}),[b]),O=Object(S.c)({overridingTokensList:b,tokenFilter:"",extendRow:a}).tokenRows,p=Object(l.b)(),f=Object(P.c)(),T=f.closeModal,C=f.goToPreviousModal,x=!!Object(_.a)("first_psp_stake"),g=Object(d.useCallback)((function(e){var t=j[e.address.toLowerCase()];Object(h.assert)(t,"No token for address "+e.address),x?(p(y.c.setHybridPoolToken2(t)),C("tradeFlow")):(p(Object(y.j)(t)),T())}),[T,p,C,x,j]);return{classes:{tableContainer:r.root},stickyHeader:!0,columns:n,rows:O,onRowClick:g,headerCellRenderer:J.b,bodyCellRenderer:v.c}}();return Object(L.jsx)(i.a,{title:"Select a token...",height:"auto",children:Object(L.jsx)(m.b,{tableProps:e,footer:null})})}},X={FillOrderTokenFrom:function(e,t){return function(n){var o={flow:{type:"fill_order",fillOrder:{arbitrarySwapDetails:{tokenFrom:n},orderHash:t.orderHash}}};e(Object(u.d)({modalType:"tradeFlow",modalProps:o}))}},SwapFormTokenFrom:function(e){return function(t,n){ne(t,"swap-from"),e(Object(b.k)(t)),(null===n||void 0===n?void 0:n.preventClosingModal)||e(Object(u.b)(null))}},SwapFormTokenTo:function(e){return function(t,n){ne(t,"swap-to"),e(Object(b.o)(t)),(null===n||void 0===n?void 0:n.preventClosingModal)||e(Object(u.b)(null))}},LimitOrderTokenFrom:function(e){return function(t,n){ne(t,"limitOrder-from"),e(Object(p.m)(t)),(null===n||void 0===n?void 0:n.preventClosingModal)||e(Object(u.b)(null))}},LimitOrderTokenTo:function(e){return function(t,n){ne(t,"limitOrder-to"),e(Object(p.n)(t)),(null===n||void 0===n?void 0:n.preventClosingModal)||e(Object(u.b)(null))}},OTCOrderTokenFrom:function(e){return function(t,n){ne(t,"OTCOrder-from"),e(Object(p.s)(t)),(null===n||void 0===n?void 0:n.preventClosingModal)||e(Object(u.b)(null))}},OTCOrderTokenTo:function(e){return function(t,n){ne(t,"OTCOrder-to"),e(Object(p.t)(t)),(null===n||void 0===n?void 0:n.preventClosingModal)||e(Object(u.b)(null))}}};function Y(e){return e in X}var Z=Object(r.a)(i.a)((function(e){return{backgroundColor:e.theme.custom.modal.tokenList.modalBackgroundColour}}),{name:"StyledGenericModal"}),$=Object(a.a)({body:{backgroundColor:"inherit"}},{name:"SelectTokenModalExtra"}),ee=function(e){var t=Object(c.a)().t,n=Object(l.b)(),o=e.excludeTokens,r=e.modalTitle,a=e.defaultTokenFilter,i=Object(d.useMemo)((function(){return e.extraDispatchProps?(0,X[e.selectTokenFactoryKey])(n,e.extraDispatchProps):(0,X[e.selectTokenFactoryKey])(n)}),[n,e.selectTokenFactoryKey,e.extraDispatchProps]),u=$().body;return Object(L.jsx)(Z,{height:"auto",title:r||t("limitOrder.fillOrder.selectToken.title"),bodyClassName:u,children:Object(L.jsx)(s.a,{defaultTokenFilter:a,excludeTokens:o,backButton:!0,onSelectToken:i})})},te=function(e){if("overriddingModal"in e){var t=Q[e.overriddingModal];return Object(L.jsx)(t,{})}return Object(L.jsx)(ee,Object(o.a)({},e))};function ne(e,t){var n="select-".concat(t,"-token");O.a.event({category:k.f.INTERACTION,action:n,label:e.symbol})}}}]);